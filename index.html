<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="./assets/bootstrap4/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="./assets/bootstrap-table/src/bootstrap-table.css">
    <link rel="stylesheet" href="./assets/examples.css">
    <script src="./assets/jquery.min.js"></script>
    <script src="./assets/bootstrap4/js/popper.min.js"></script>
    <script src="./assets/bootstrap4/js/bootstrap.min.js"></script>
    <script src="./assets/bootstrap-table/src/bootstrap-table.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="ga.js"></script>
    <script src="./options/chart.js"></script>

<style type="text/css">
   body { background: gray; } /* Adding !important forces the browser to overwrite the default style applied by Bootstrap */
	/*  Define the background color for all the ODD table columns  */
	.table tr th:nth-child(odd){ 
		background: #dae5f4;
	}
	/*  Define the background color for all the EVEN table columns  */
	.table tr th:nth-child(even){
		background: #b8d1f3;
	}
</style>

</head>
<body>

<div class="container" style="background: white;">
<h1> KPI </h1>
Data : (Jan, 2018)
    <table class="table table-striped table-sm"
           id="table"
           data-toggle="true"
           data-search="true"
           data-show-refresh="true"
           data-show-header="true"
           data-show-toggle="true"
           data-detail-view="true"
           data-side-pagination="server"
           data-url="./kpiData.Json">
    </table>
<hr>
<div class="row">
  <div class="col-md-12">
      <div id="allHealthRate" style=""></div>
  </div>
</div>
</div>


<script>
    var $table = $('#table'),
        $remove = $('#remove'),
        selections = [];

    function initTable() {
        $table.bootstrapTable({
            height: getHeight(),
            columns: [[{"title":"Forest","field":"Forest","rowspan":4,"colspan":1,"align":"center","valign":"bottom"},{"title":"Capacity","field":null,"rowspan":1,"colspan":14,"align":"center","valign":"bottom"},{"title":"Risk Factors","field":null,"rowspan":1,"colspan":18,"align":"center","valign":"bottom"}],[{"title":"Provisioning Status","field":null,"rowspan":1,"colspan":3,"align":"center","valign":"bottom"},{"title":"Dit Size","field":null,"rowspan":1,"colspan":3,"align":"center","valign":"bottom"},{"title":"Disk Usage (C:)","field":null,"rowspan":1,"colspan":8,"align":"center","valign":"bottom"},{"title":"CPU Usage","field":null,"rowspan":1,"colspan":2,"align":"center","valign":"bottom"},{"title":"Memory Usage","field":null,"rowspan":1,"colspan":4,"align":"center","valign":"bottom"},{"title":"AD Connection Count (Per Hour)","field":null,"rowspan":1,"colspan":3,"align":"center","valign":"bottom"},{"title":"Network I/O Output Queue Length (Per Hour)","field":null,"rowspan":1,"colspan":3,"align":"center","valign":"bottom"},{"title":"Network I/O BytesReceived (Per Hour)","field":null,"rowspan":1,"colspan":3,"align":"center","valign":"bottom"},{"title":"ATQ Length (Per Hour)","field":null,"rowspan":1,"colspan":3,"align":"center","valign":"bottom"}],[{"title":"Health Rate (%)","field":"Capacity.ProvisioningStatus.HealthRate","rowspan":2,"colspan":1,"align":"center","valign":"bottom","formatter":"progressFormatter"},{"title":"Provisioned Count","sortable":true, "field":"Capacity.ProvisioningStatus.ProvisionedCount","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"In MM Count","field":"Capacity.ProvisioningStatus.InMMCount","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Average","field":"Capacity.DitSize.Average","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"Capacity.DitSize.FPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"90 Percentile","field":"Capacity.DitSize.NPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Free Space (%)","field":null,"rowspan":1,"colspan":4,"align":"center","valign":"bottom"},{"title":"Free MBytes (%)","field":null,"rowspan":1,"colspan":4,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"RiskFactors.CpuUsage.FPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"90 Percentile","field":"RiskFactors.CpuUsage.NPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Free Space","field":null,"rowspan":1,"colspan":2,"align":"center","valign":"bottom"},{"title":"Free MBytes","field":null,"rowspan":1,"colspan":2,"align":"center","valign":"bottom"},{"title":"Average","field":"RiskFactors.AdConnectionCount.Average","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"RiskFactors.AdConnectionCount.FPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"90 Percentile","field":"RiskFactors.AdConnectionCount.NPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Average","field":"RiskFactors.NetworkIOQueue.Average","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"RiskFactors.NetworkIOQueue.FPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"90 Percentile","field":"RiskFactors.NetworkIOQueue.NPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Average","field":"RiskFactors.NetworkIOByte.Average","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"RiskFactors.NetworkIOByte.FPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"90 Percentile","field":"RiskFactors.NetworkIOByte.NPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Average","field":"RiskFactors.AtqLength.Average","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"RiskFactors.AtqLength.FPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"90 Percentile","field":"RiskFactors.AtqLength.NPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"}],[{"title":"Max","field":"Capacity.DiskUsageC.FreeSpace.Max","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"Min","field":"Capacity.DiskUsageC.FreeSpace.Min","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"Capacity.DiskUsageC.FreeSpace.FPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"90 Percentile","field":"Capacity.DiskUsageC.FreeSpace.NPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"Max","field":"Capacity.DiskUsageC.FreeMBytes.Max","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"Min","field":"Capacity.DiskUsageC.FreeMBytes.Min","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"Capacity.DiskUsageC.FreeMBytes.FPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"90 Percentile","field":"Capacity.DiskUsageC.FreeMBytes.NPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"RiskFactors.MemoryUsage.FreeSpace.FPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"90 Percentile","field":"RiskFactors.MemoryUsage.FreeSpace.NPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"RiskFactors.MemoryUsage.FreeMBytes.FPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"90 Percentile","field":"RiskFactors.MemoryUsage.FreeMBytes.NPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"}]]

        });

        $table.on('expand-row.bs.table', function (e, index, row, $detail) {
		$detail.html('<p><a href="./options/Charts.html">Forest Historical Status Charts</a></p>');
        });
        $(window).resize(function () {
            $table.bootstrapTable('resetView', {
                height: getHeight()
            });
        });
    }

    function progressFormatter(value, row, index) {

	var bar = 'bg-success';
	if (value < 60) {
            bar = 'bg-danger';
        }

        return [
		'<div class="progress">',
  		'<div class="progress-bar '+bar+'" role="progressbar" aria-valuenow=' + value + '',
		'aria-valuemin="0" aria-valuemax="100" style="width:'+ value + '%">',
     		''+ value + ' %',
  		'</div>',
		'</div>',
        ].join('');
    }

    function getHeight() {
        return $(window).height() - $('h1').outerHeight(true);
    }

    $(function () {
        initTable();
        drawAllCharts();
    });

</script>
</body>
</html>
