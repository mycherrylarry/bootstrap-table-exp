<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="./assets/bootstrap4/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="./assets/bootstrap-table/src/bootstrap-table.css">
    <link rel="stylesheet" href="./assets/examples.css">
    <script src="./assets/jquery.min.js"></script>
    <script src="./assets/bootstrap4/js/popper.min.js"></script>
    <script src="./assets/bootstrap4/js/bootstrap.min.js"></script>
    <script src="./assets/bootstrap-table/src/bootstrap-table.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/modules/drilldown.js"></script>
    <script src="ga.js"></script>
    <script src="./options/chart.js"></script>

<style type="text/css">
   body { background: gray; } /* Adding !important forces the browser to overwrite the default style applied by Bootstrap */
	/*  Define the background color for all the ODD table columns  */
</style>

</head>
<body>

<div class="container" style="background: white;">
<h1> KPI </h1>
Data : (Jan, 2018)
    <table class="table table-striped table-sm"
           id="table"
           data-toggle="true"
           data-search="true"
           data-show-refresh="true"
           data-show-header="true"
           data-show-toggle="true"
           data-detail-view="true"
           data-side-pagination="server"
           data-url="./kpiData.Json">
    </table>
<hr>
<div class="row">
  <div class="col-md-12">
      <div id="allHealthRate" style=""></div>
  </div>
  <div class="col-md-12">
      <div id="sku" style=""></div>
  </div>
</div>
</div>


<script>
    var $table = $('#table'),
        $remove = $('#remove'),
        selections = [];

    function initTable() {
        $table.bootstrapTable({
            height: getHeight(),
            columns: [[{"title":"Forest","field":"Forest","rowspan":3,"colspan":1,"align":"center","valign":"bottom"},{"title":"Provisioning Status","field":null,"rowspan":1,"colspan":3,"align":"center","valign":"bottom"},{"title":"CPU Usage","field":null,"rowspan":1,"colspan":2,"align":"center","valign":"bottom"},{"title":"Memory Usage","field":null,"rowspan":1,"colspan":2,"align":"center","valign":"bottom"},{"title":"AD Connection Count","field":null,"rowspan":1,"colspan":8,"align":"center","valign":"bottom"},{"title":"Network Bandwidth","field":null,"rowspan":1,"colspan":4,"align":"center","valign":"bottom"},{"title":"D Drive","field":null,"rowspan":1,"colspan":3,"align":"center","valign":"bottom"},{"title":"C Drive","field":null,"rowspan":1,"colspan":3,"align":"center","valign":"bottom"},{"title":"Maximum AD Inbound Replication","field":null,"rowspan":1,"colspan":2,"align":"center","valign":"bottom"},{"title":"Maximum DRA Pending Rerplication Operations","field":"DraPendingReplication","rowspan":3,"colspan":1,"align":"center","valign":"bottom"}],[{"title":"Health Rate (%)","field":"ProvisioningStatus.HealthRate","formatter":"progressFormatter","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Provisioned Count (#)","field":"ProvisioningStatus.ProvisionedCount","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"In MM Count (%)","field":"ProvisioningStatus.InMMCount","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"CpuUsage.FPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Maximum","field":"CpuUsage.Maximum","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"MemoryUsage.FPercentile","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Maximum","field":"MemoryUsage.Maximum","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"LDAP New Connections/sec","field":null,"rowspan":1,"colspan":2,"align":"center","valign":"bottom"},{"title":"LDAP Searches/sec","field":null,"rowspan":1,"colspan":2,"align":"center","valign":"bottom"},{"title":"LDAP Writes/sec","field":null,"rowspan":1,"colspan":2,"align":"center","valign":"bottom"},{"title":"DS Search Sub-Operations/sec","field":null,"rowspan":1,"colspan":2,"align":"center","valign":"bottom"},{"title":"Network Current Bandwidth","field":null,"rowspan":1,"colspan":2,"align":"center","valign":"bottom"},{"title":"ATQ Outstanding Queued Requests","field":null,"rowspan":1,"colspan":2,"align":"center","valign":"bottom"},{"title":"Maximum Usage","field":"DDrive.Usage","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Maximum Disk Reads/sec","field":"DDrive.Dreads","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Maximum Disk Writes/sec","field":"DDrive.Dwrites","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Maximum Usage","field":"CDrive.Usage","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Maximum Disk Reads/sec","field":"CDrive.Dreads","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Maximum Disk Writes/sec","field":"CDrive.Dwrites","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Config NC","field":"AdInboundReplication.ConfigNC","rowspan":2,"colspan":1,"align":"center","valign":"bottom"},{"title":"Domain NC","field":"AdInboundReplication.DomainNC","rowspan":2,"colspan":1,"align":"center","valign":"bottom"}],[{"title":"50 Percentile","field":"AdConnectionCount.LdapNewConnections.FPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"Maximum","field":"AdConnectionCount.LdapNewConnections.Maximum","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"AdConnectionCount.LdapSearches.FPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"Maximum","field":"AdConnectionCount.LdapSearches.Maximum","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"AdConnectionCount.LdapWrites.FPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"Maximum","field":"AdConnectionCount.LdapWrites.Maximum","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"AdConnectionCount.DsSearchSubOperations.FPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"Maximum","field":"AdConnectionCount.DsSearchSubOperations.Maximum","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"NetworkBandwidth.NetworkCurrentBandwidth.FPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"Maximum","field":"NetworkBandwidth.NetworkCurrentBandwidth.Maximum","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"50 Percentile","field":"NetworkBandwidth.AtqOutstandingQueuedRequests.FPercentile","rowspan":1,"colspan":1,"align":"center","valign":"bottom"},{"title":"Maximum","field":"NetworkBandwidth.AtqOutstandingQueuedRequests.Maximum","rowspan":1,"colspan":1,"align":"center","valign":"bottom"}]]

        });

        $table.on('expand-row.bs.table', function (e, index, row, $detail) {
		$detail.html('<p><a href="./options/Charts.html">Forest Historical Status Charts</a></p>');
        });
        $(window).resize(function () {
            $table.bootstrapTable('resetView', {
                height: getHeight()
            });
        });
    }

    function progressFormatter(value, row, index) {

	var bar = 'bg-success';
	if (value < 60) {
            bar = 'bg-danger';
        }

        return [
		'<div class="progress">',
  		'<div class="progress-bar '+bar+'" role="progressbar" aria-valuenow=' + value + '',
		'aria-valuemin="0" aria-valuemax="100" style="width:'+ value + '%">',
     		''+ value + ' %',
  		'</div>',
		'</div>',
        ].join('');
    }

    function getHeight() {
        return $(window).height() - $('h1').outerHeight(true);
    }

    $(function () {
        initTable();
        drawAllCharts();
    });

</script>
</body>
</html>
